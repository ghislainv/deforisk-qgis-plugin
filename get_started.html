
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Get started &#8212; deforisk — Create and compare deforestation risk maps</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=60dbed4a"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'get_started';</script>
    <link rel="canonical" href="https://deforisk-qgis-plugin.org/get_started.html" />
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Articles" href="articles.html" />
    <link rel="prev" title="Installation" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
    
    <img src="_static/logo-deforisk-large.png" class="logo__image only-light" alt="deforisk — Create and compare deforestation risk maps - Home"/>
    <img src="_static/logo-deforisk-large.png" class="logo__image only-dark pst-js-only" alt="deforisk — Create and compare deforestation risk maps - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="articles.html">
    Articles
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="plugin_api.html">
    Plugin API
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contributing/changelog.html">
    Changelog
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contributing/community_guidelines.html">
    Community guidelines
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contributing/code_of_conduct.html">
    Code of Conduct
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contributing/license.html">
    License
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ghislainv/deforisk-qgis-plugin" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.qgis.org/" title="QGIS" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="_static/icon_qgis.png" class="icon-link-image" alt="QGIS"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="articles.html">
    Articles
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="plugin_api.html">
    Plugin API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing/changelog.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing/community_guidelines.html">
    Community guidelines
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing/code_of_conduct.html">
    Code of Conduct
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing/license.html">
    License
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ghislainv/deforisk-qgis-plugin" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.qgis.org/" title="QGIS" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="_static/icon_qgis.png" class="icon-link-image" alt="QGIS"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Get started</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="get-started">
<h1>Get started<a class="headerlink" href="#get-started" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Open QGIS on your computer. To have access to log messages, activate the “Log Messages” panel in QGIS going to <code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">&gt;</span> <span class="pre">Panel</span> <span class="pre">&gt;</span> <span class="pre">Log</span> <span class="pre">Messages</span></code> in the Menu. When using a plugin, it is also a good habit to open the Python console in QGIS to have access to Python messages returned in the console. To open it, click on the Python icon <img alt="ico_py" class="no-scaled-link" src="_images/icon_python_console_toolbar.png" /> in the “Plugins Toolbar”. If the toolbar is not visible, activate it going to <code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">&gt;</span> <span class="pre">Toolbars</span> <span class="pre">&gt;</span> <span class="pre">Plugins</span> <span class="pre">Toolbar</span></code> in the Menu.</p>
<p>Once the plugin has been installed (see <a class="reference external" href="installation.html">Installation</a> instructions), open the plugin clicking on its icon <img alt="ico_deforisk" class="no-scaled-link" src="_images/icon_deforisk_toolbar.png" />. You should see the versions of the dependencies installed in your environment written in the Python console. Check that these version numbers correspond to the last version for each dependency. Otherwise upgrade the dependencies.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">osmconvert</span> <span class="mf">0.8.10</span>
<span class="n">osmfilter</span> <span class="mf">1.4.4</span>
<span class="n">geefcc</span> <span class="mf">0.1.3</span>
<span class="n">pywdpa</span> <span class="mf">0.1.6</span>
<span class="n">forestatrisk</span> <span class="mf">1.2</span>
<span class="n">riskmapjnr</span> <span class="mf">1.3</span>
</pre></div>
</div>
<p>To test the plugin and have a first look at its functionalities, try it on a small area of interest (AOI) such as the <a class="reference external" href="https://en.wikipedia.org/wiki/Martinique">Martinique</a> island (1128 km<sup>2</sup>) which has the MTQ iso code. Testing the plugin on a small AOI has the advantage of making computations fast so that you can directly see the outputs, interpret the results, and understand the functioning of the plugin.</p>
<p>To better understand the different steps, keep in mind that we are considering different periods and dates for model calibration and validation.</p>
<figure class="align-default" id="id8">
<a class="reference internal image-reference" href="_images/periods.png"><img alt="_images/periods.png" src="_images/periods.png" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-text">Dates and periods used to calibrate and validate models. Modified from <a class="reference external" href="https://verra.org/methodologies/vt0007-unplanned-deforestation-allocation-udef-a-v1-0/">Verra’s VT0007</a>. In our case, we renamed the period from t2 to t3 as the “validation” period in place of the “confirmation” period.</span><a class="headerlink" href="#id8" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="get-variables">
<h2>Get variables<a class="headerlink" href="#get-variables" title="Link to this heading">#</a></h2>
<img alt="_images/interface-variables.png" src="_images/interface-variables.png" />
<p><br/></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Working</span> <span class="pre">directory</span></code>: Select your working directory. Here <code class="docutils literal notranslate"><span class="pre">/home/&lt;username&gt;/deforisk/MTQ-tuto</span></code>, but it could be <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;username&gt;\deforisk\MTQ-tuto</span></code> on Windows for example.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Area</span> <span class="pre">Of</span> <span class="pre">Interest</span></code>: MTQ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Years</span></code>: 2000, 2010, 2020</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Forest</span> <span class="pre">data</span> <span class="pre">source</span></code>: tmf</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tree</span> <span class="pre">cover</span> <span class="pre">threshold</span> <span class="pre">(%)</span></code>: 50 (could be left empty, not useful here for tmf data source)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tile</span> <span class="pre">size</span> <span class="pre">(dd)</span></code>: 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Country/state</span> <span class="pre">ISO</span> <span class="pre">code</span></code>: MTQ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Earth</span> <span class="pre">Engine</span> <span class="pre">access</span></code>: Google Cloud project name with Earth Engine access or path to a JSON private key file for service account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WDPA</span> <span class="pre">access</span></code>: Personal WDPA API Token or path to text file with WDPA_KEY environmental variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Projection</span> <span class="pre">EPSG</span> <span class="pre">code</span></code>: EPSG:5490</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Only</span> <span class="pre">compute</span> <span class="pre">forest</span> <span class="pre">variables</span></code>: <strong>unchecked</strong>, data will be downloaded from global data-sets (SRTM, WDPA, OSM) and explanatory variables other than forest related variables will be computed.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For Windows users, choose a working directory with a short path (e.g. <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;username&gt;\&lt;dirname&gt;</span></code>). Long file paths can cause problems to access files on Windows.</p>
</div>
<p>Click the run button. A forest cover change map appears in the list of QGIS layers (see image below and click to enlarge) and a plot of the forest cover change <code class="docutils literal notranslate"><span class="pre">fcc123.png</span></code> is created in folder <code class="docutils literal notranslate"><span class="pre">outputs/variables</span></code>. New folders are created in the working directory among which the <code class="docutils literal notranslate"><span class="pre">data_raw</span></code> folder which includes raw data with intermediary files and the <code class="docutils literal notranslate"><span class="pre">data</span></code> folder which includes processed data used for models and plots. You can visualize the road network for example adding the <code class="docutils literal notranslate"><span class="pre">roads_proj.shp</span></code> vector file, which is located in the <code class="docutils literal notranslate"><span class="pre">data_raw</span></code> directory, in QGIS.</p>
<a class="reference internal image-reference" href="_images/qgis-variables-results.png"><img alt="_images/qgis-variables-results.png" src="_images/qgis-variables-results.png" style="width: 650px;" />
</a>
<p><br/></p>
<p>If you want to skip this step, you can download a <a class="reference external" href="./_static/tutos/MTQ-tuto.zip">zip file including all the data for the MTQ example</a>.</p>
</section>
<section id="benchmark-model">
<h2>Benchmark model<a class="headerlink" href="#benchmark-model" title="Link to this heading">#</a></h2>
<img alt="_images/interface-benchmark.png" src="_images/interface-benchmark.png" />
<section id="fit-model-to-data">
<h3>Fit model to data<a class="headerlink" href="#fit-model-to-data" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Deforestation</span> <span class="pre">threshold</span> <span class="pre">(%)</span></code>: 99.5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Max.</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">forest</span> <span class="pre">edge</span> <span class="pre">(m)</span></code>: 2500</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calib.</span> <span class="pre">period</span></code>: Checked, the model is fitted over the calibration period (t1–t2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hist.</span> <span class="pre">period</span></code>: Checked, the model is fitted over the historical period (t1–t3).</p></li>
</ul>
<p>Click the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button to estimate the deforestation risk with the benchmark model and predict the deforestation risk at t1 using data on both the calibration and historical periods. Maps with classes of deforestation risk are added to the list of QGIS layers (see image below).</p>
<a class="reference internal image-reference" href="_images/qgis-benchmark-results.png"><img alt="_images/qgis-benchmark-results.png" src="_images/qgis-benchmark-results.png" style="width: 650px;" />
</a>
<p><br/></p>
<p>New folders with results are created in the <code class="docutils literal notranslate"><span class="pre">outputs/rmj_benchmark/</span></code> directory for each period. In particular, the output folders include the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/perc_dist.png</span></code> file. This file shows the plot of the cumulated deforestation as a function of the distance to forest edge and indicates the distance threshold (here 240 m for the calibration period).</p>
<figure class="align-default" id="id9">
<span id="fig-perc-dist"></span><a class="reference internal image-reference" href="_images/perc_dist.png"><img alt="_images/perc_dist.png" src="_images/perc_dist.png" style="width: 600px;" />
</a>
<figcaption>
<p><span class="caption-text">Distance threshold for the calibration period.</span><a class="headerlink" href="#id9" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The output folders also include the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/defrate_cat_bm_&lt;period&gt;.csv</span></code> table which shows the deforestation rates for each class of deforestation risk (see details <a class="reference external" href="plugin_api.html#defrate-table">here</a>).</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-defrate">
<caption><span class="caption-text">Deforestation rate for each class of deforestation risk (numbers truncated to three decimal digits).</span><a class="headerlink" href="#tab-defrate" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>cat</p></th>
<th class="head"><p>nfor</p></th>
<th class="head"><p>ndefor</p></th>
<th class="head"><p>rate_obs</p></th>
<th class="head"><p>rate_mod</p></th>
<th class="head"><p>rate_abs</p></th>
<th class="head"><p>time_interval</p></th>
<th class="head"><p>pixel_area</p></th>
<th class="head"><p>defor_dens</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1001</p></td>
<td><p>33433</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>10</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td><p>1002</p></td>
<td><p>12965</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>10</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td><p>1003</p></td>
<td><p>91686</p></td>
<td><p>19</p></td>
<td><p>2.072e-05</p></td>
<td><p>2.072e-04</p></td>
<td><p>2.072e-04</p></td>
<td><p>10</p></td>
<td><p>0.09</p></td>
<td><p>1.865e-06</p></td>
</tr>
<tr class="row-odd"><td><p>1004</p></td>
<td><p>82279</p></td>
<td><p>5</p></td>
<td><p>6.077e-06</p></td>
<td><p>6.076e-05</p></td>
<td><p>6.076e-05</p></td>
<td><p>10</p></td>
<td><p>0.09</p></td>
<td><p>5.469e-07</p></td>
</tr>
<tr class="row-even"><td><p>2001</p></td>
<td><p>1373</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>0.0</p></td>
<td><p>10</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="predict-the-deforestation-risk">
<h3>Predict the deforestation risk<a class="headerlink" href="#predict-the-deforestation-risk" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t2</span> <span class="pre">validation</span></code>: Checked, computes predictions at t2 for validation (using the benchmark model fitted over the calibration period).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t3</span> <span class="pre">forecast</span></code>: Checked, computes predictions at t3 for forecasting (using the benchmark model fitted over the historical period).</p></li>
</ul>
<p>Click the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button to predict the deforestation risk at t2 and t3 using the benchmark model. Maps with classes of deforestation risk are added to the list of QGIS layers and new files are added to the output folders.</p>
</section>
</section>
<section id="forestatrisk-models">
<h2>Forestatrisk models<a class="headerlink" href="#forestatrisk-models" title="Link to this heading">#</a></h2>
<img alt="_images/interface-far.png" src="_images/interface-far.png" />
<section id="sample-observations">
<h3>Sample observations<a class="headerlink" href="#sample-observations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">N#</span> <span class="pre">samples</span></code>: 10000</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Adapt</span> <span class="pre">sampling</span></code>: Checked, the number of observations is proportional to forest area.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Random</span> <span class="pre">seed</span></code>: 1234</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Spatial</span> <span class="pre">cell</span> <span class="pre">size</span> <span class="pre">(km)</span></code>: 2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calib.</span> <span class="pre">period</span></code>: Checked, the observations are sampled for the calibration period (t1–t2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hist.</span> <span class="pre">period</span></code>: Checked, the observations are sampled for the historical period (t1–t3).</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For large jurisdictions, to avoid computing to many parameters for spatial random effects, set the spatial cell size at ~10km.</p>
</div>
<p>Pushing the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button in this box will sample the observations. When the operation is finished, the sampled observations appear in the list of QGIS layers.</p>
<a class="reference internal image-reference" href="_images/qgis-far-sample-results.png"><img alt="_images/qgis-far-sample-results.png" src="_images/qgis-far-sample-results.png" style="width: 650px;" />
</a>
<p><br/></p>
<p>New folders with results are created in the <code class="docutils literal notranslate"><span class="pre">outputs/far_models/</span></code> directory including the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/sample.txt</span></code> file which is the observation dataset with variable values.</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-observations">
<caption><span class="caption-text">Five first observations for the calibration period.</span><a class="headerlink" href="#tab-observations" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>altitude</p></th>
<th class="head"><p>dist_edge</p></th>
<th class="head"><p>dist_river</p></th>
<th class="head"><p>dist_road</p></th>
<th class="head"><p>dist_town</p></th>
<th class="head"><p>fcc</p></th>
<th class="head"><p>pa</p></th>
<th class="head"><p>slope</p></th>
<th class="head"><p>X</p></th>
<th class="head"><p>Y</p></th>
<th class="head"><p>cell</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>56</p></td>
<td><p>30</p></td>
<td><p>750</p></td>
<td><p>0</p></td>
<td><p>150</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>6</p></td>
<td><p>700155</p></td>
<td><p>1645545</p></td>
<td><p>63</p></td>
</tr>
<tr class="row-odd"><td><p>56</p></td>
<td><p>30</p></td>
<td><p>750</p></td>
<td><p>0</p></td>
<td><p>150</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>6</p></td>
<td><p>700185</p></td>
<td><p>1645545</p></td>
<td><p>63</p></td>
</tr>
<tr class="row-even"><td><p>100</p></td>
<td><p>30</p></td>
<td><p>875</p></td>
<td><p>0</p></td>
<td><p>1657</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>5</p></td>
<td><p>698265</p></td>
<td><p>1645425</p></td>
<td><p>62</p></td>
</tr>
<tr class="row-odd"><td><p>93</p></td>
<td><p>30</p></td>
<td><p>600</p></td>
<td><p>0</p></td>
<td><p>1358</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>8</p></td>
<td><p>698565</p></td>
<td><p>1645425</p></td>
<td><p>62</p></td>
</tr>
<tr class="row-even"><td><p>68</p></td>
<td><p>30</p></td>
<td><p>300</p></td>
<td><p>0</p></td>
<td><p>335</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>7</p></td>
<td><p>699615</p></td>
<td><p>1645425</p></td>
<td><p>63</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1">
<h3>Fit model to data<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">of</span> <span class="pre">variables</span></code>: Leave empty, it will use the default formula: <code class="docutils literal notranslate"><span class="pre">C(pa)</span> <span class="pre">+</span> <span class="pre">altitude</span> <span class="pre">+</span> <span class="pre">slope</span> <span class="pre">+</span> <span class="pre">dist_edge</span> <span class="pre">+</span> <span class="pre">dist_road</span> <span class="pre">+</span> <span class="pre">dist_river</span> <span class="pre">+</span> <span class="pre">dist_town</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Starting</span> <span class="pre">values</span> <span class="pre">for</span> <span class="pre">betas</span></code>: -99</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Prior</span> <span class="pre">Vrho</span></code>: -1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MCMC</span></code>: 100</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Variable</span> <span class="pre">selection</span></code>: Leave unchecked, no variable selection (make computations faster for this example).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calib.</span> <span class="pre">period</span></code>: Checked, models are fitted over the calibration period (t1–t2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hist.</span> <span class="pre">period</span></code>: Checked, models are fitted over the historical period (t1–t3).</p></li>
</ul>
<p>Pushing the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button in this box will fit the statistical model to the deforestation observations. Three statistical models are fitted (iCAR model, GLM, and Random Forest model). New files are added to the <code class="docutils literal notranslate"><span class="pre">outputs/far_models/calibration</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs/far_models/historical</span></code> folders. In particular, the <code class="docutils literal notranslate"><span class="pre">summary_icar.txt</span></code> file is the summary of the iCAR model with mean, standard-deviation, and credible intervals for model parameters.</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-parameters">
<caption><span class="caption-text">Summary of the iCAR model for the calibration period.</span><a class="headerlink" href="#tab-parameters" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Mean</p></th>
<th class="head"><p>Std</p></th>
<th class="head"><p>CI_low</p></th>
<th class="head"><p>CI_high</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Intercept</p></td>
<td><p>-3.39</p></td>
<td><p>0.158</p></td>
<td><p>-3.7</p></td>
<td><p>-3.1</p></td>
</tr>
<tr class="row-odd"><td><p>C(pa)[T.1.0]</p></td>
<td><p>-0.0915</p></td>
<td><p>0.122</p></td>
<td><p>-0.282</p></td>
<td><p>0.172</p></td>
</tr>
<tr class="row-even"><td><p>scale(dist_edge)</p></td>
<td><p>-10.3</p></td>
<td><p>0.417</p></td>
<td><p>-11.1</p></td>
<td><p>-9.63</p></td>
</tr>
<tr class="row-odd"><td><p>scale(dist_road)</p></td>
<td><p>-0.256</p></td>
<td><p>0.0537</p></td>
<td><p>-0.36</p></td>
<td><p>-0.144</p></td>
</tr>
<tr class="row-even"><td><p>scale(dist_town)</p></td>
<td><p>0.0342</p></td>
<td><p>0.0464</p></td>
<td><p>-0.0551</p></td>
<td><p>0.123</p></td>
</tr>
<tr class="row-odd"><td><p>scale(dist_river)</p></td>
<td><p>-0.0817</p></td>
<td><p>0.0544</p></td>
<td><p>-0.188</p></td>
<td><p>0.0199</p></td>
</tr>
<tr class="row-even"><td><p>scale(altitude)</p></td>
<td><p>-0.554</p></td>
<td><p>0.0809</p></td>
<td><p>-0.728</p></td>
<td><p>-0.4</p></td>
</tr>
<tr class="row-odd"><td><p>scale(slope)</p></td>
<td><p>-0.532</p></td>
<td><p>0.0392</p></td>
<td><p>-0.611</p></td>
<td><p>-0.457</p></td>
</tr>
<tr class="row-even"><td><p>Vrho</p></td>
<td><p>6.89</p></td>
<td><p>0.756</p></td>
<td><p>5.64</p></td>
<td><p>8.49</p></td>
</tr>
<tr class="row-odd"><td><p>Deviance</p></td>
<td><p>1.36e+04</p></td>
<td><p>24.9</p></td>
<td><p>1.36e+04</p></td>
<td><p>1.37e+04</p></td>
</tr>
</tbody>
</table>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">model_deviances.csv</span></code> file include a table for comparing percent of deviance explained between models.</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-deviances">
<caption><span class="caption-text">Percent of deviance explained by models for the calibration period.</span><a class="headerlink" href="#tab-deviances" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>model</p></th>
<th class="head"><p>deviance</p></th>
<th class="head"><p>perc</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>null</p></td>
<td><p>26769.0</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td><p>glm</p></td>
<td><p>16864.0</p></td>
<td><p>37.0</p></td>
</tr>
<tr class="row-even"><td><p>rf</p></td>
<td><p>6668.0</p></td>
<td><p>75.0</p></td>
</tr>
<tr class="row-odd"><td><p>icar</p></td>
<td><p>13636.0</p></td>
<td><p>49.0</p></td>
</tr>
<tr class="row-even"><td><p>full</p></td>
<td><p>0.0</p></td>
<td><p>100.0</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id2">
<h3>Predict the deforestation risk<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Spatial</span> <span class="pre">cell</span> <span class="pre">size</span> <span class="pre">interpolation</span> <span class="pre">(km)</span></code>: 0.1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iCAR</span> <span class="pre">model</span></code>: Checked, computes predictions with the iCAR model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GLM</span></code>: Checked, computes predictions with GLM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RF</span> <span class="pre">model</span></code>: Checked, computes predictions with the Random Forest model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t1</span> <span class="pre">calibration</span></code>: Checked, computes predictions at t1 using models fitted over the calibration period.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t2</span> <span class="pre">validation</span></code>: Checked, computes predictions at t2 for validation (using models fitted over the calibration period).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t1</span> <span class="pre">historical</span></code>: Checked, computes predictions at t1 using models fitted over the historical period.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t3</span> <span class="pre">forecast</span></code>: Checked, computes predictions at t3 for forecasting (using models fitted over the historical period).</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For large jurisdictions, to avoid obtaining a large raster file (of type Float), set interpolation of spatial random effects at ~1km.</p>
</div>
<p>Pushing the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button in this box will use the statistical models for predictions. When the operation is finished, rasters representing the classes of deforestation risk appear in the list of QGIS layers. New folders are created <code class="docutils literal notranslate"><span class="pre">outputs/far_models/validation</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs/far_models/forecast</span></code>. They include the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/defrate_cat_&lt;model&gt;_&lt;period&gt;.csv</span></code> tables with deforestation rates for each class of deforestation risk (see details <a class="reference external" href="plugin_api.html#defrate-table">here</a>).</p>
<a class="reference internal image-reference" href="_images/qgis-far-results.png"><img alt="_images/qgis-far-results.png" src="_images/qgis-far-results.png" style="width: 650px;" />
</a>
</section>
</section>
<section id="moving-window-models">
<h2>Moving window models<a class="headerlink" href="#moving-window-models" title="Link to this heading">#</a></h2>
<img alt="_images/interface-mw.png" src="_images/interface-mw.png" />
<section id="id4">
<h3>Fit model to data<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Deforestation</span> <span class="pre">threshold</span> <span class="pre">(%)</span></code>: 99.5%</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Max.</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">forest</span> <span class="pre">edge</span> <span class="pre">(m)</span></code>: 2500</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Window</span> <span class="pre">sizes</span> <span class="pre">(#</span> <span class="pre">pixels)</span></code>: 11, 21</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calib.</span> <span class="pre">period</span></code>: Checked, the model is fitted over the calibration period (t1–t2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hist.</span> <span class="pre">period</span></code>: Checked, the model is fitted over the historical period (t1–t3).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For large jurisdictions, if you want to reduce computation time, use only one moving window size (e.g. 21 pixels).</p>
</div>
<p>Click the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button to estimate the deforestation risk with the moving window model using data on both the calibration and historical periods. New folders with results are created in the <code class="docutils literal notranslate"><span class="pre">outputs/rmj_moving_window/</span></code> directory including the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/ldefrate_mw_&lt;window_size&gt;.tif</span></code> raster file with local deforestation rates rescaled on [2, 65535].</p>
</section>
<section id="id5">
<h3>Predict the deforestation risk<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t2</span> <span class="pre">validation</span></code>: Checked, computes predictions at t2 for validation (using the moving window model fitted over the calibration period).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t3</span> <span class="pre">forecast</span></code>: Checked, computes predictions at t3 for forecasting (using the moving window model fitted over the historical period).</p></li>
</ul>
<p>Click the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button to predict the deforestation risk at t2 and t3 using the moving window model. Maps with classes of deforestation risk are added to the list of QGIS layers (see image below) and new folders with results are created in the <code class="docutils literal notranslate"><span class="pre">outputs/rmj_moving_window/</span></code> directory, including the <code class="docutils literal notranslate"><span class="pre">&lt;period&gt;/defrate_cat_mv_&lt;window_size&gt;_&lt;period&gt;.csv</span></code> tables with deforestation rates for each class of deforestation risk (see details <a class="reference external" href="plugin_api.html#defrate-table">here</a>).</p>
<a class="reference internal image-reference" href="_images/qgis-mw-results.png"><img alt="_images/qgis-mw-results.png" src="_images/qgis-mw-results.png" style="width: 650px;" />
</a>
</section>
</section>
<section id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Link to this heading">#</a></h2>
<img alt="_images/interface-validation.png" src="_images/interface-validation.png" />
<p><br/></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Coarse</span> <span class="pre">grid</span> <span class="pre">cell</span> <span class="pre">size</span> <span class="pre">(#</span> <span class="pre">pixels)</span></code>: 50, 100</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iCAR</span> <span class="pre">model</span></code>: Checked, estimates the performance of the iCAR model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GLM</span></code>: Checked, estimates the performance of the GLM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RF</span> <span class="pre">model</span></code>: Checked, estimates the performance of the Random Forest model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MW</span> <span class="pre">model</span></code>: Checked, estimates the performance of the Moving Window models.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calib.</span> <span class="pre">period</span></code>: Checked, estimates model performances for the calibration period (t1–t2).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">valid.</span> <span class="pre">period</span></code>: Checked, estimates model performances for the validation period (t2–t3).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hist.</span> <span class="pre">period</span></code>: Checked, estimates model performances for the historical period (t1–t3).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For large jurisdictions, if you want to reduce computation time, use only one cell size (e.g. 100 pixels) and check only the validation period, the only one with independent observations.</p>
</div>
<p>Pushing the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button in this box will compute the predicted deforested area in each grid cell for each model and each period selected and compare this value to the observed deforested area for the same grid cell and period.</p>
<p>New folders are created for each period: <code class="docutils literal notranslate"><span class="pre">outputs/model_validation/&lt;period&gt;/figures</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs/model_validation/&lt;period&gt;/tables</span></code>. Several output files are added to each folder.</p>
<p>Files <code class="docutils literal notranslate"><span class="pre">figures/pred_obs_&lt;model&gt;_&lt;period&gt;_&lt;cell_size&gt;.png</span></code> which show the plot of predicted vs. observed deforested area. The plot shows values of predicted and observed deforested area in each grid cell as points and the one-one line. The plot reports also the number of grid cells (or points), and the values of two of the performance indices: the <span class="math notranslate nohighlight">\(R^{2}\)</span> and the MedAE.</p>
<a class="reference internal image-reference" href="_images/pred_obs_icar_validation_50.png"><img alt="_images/pred_obs_icar_validation_50.png" src="_images/pred_obs_icar_validation_50.png" style="width: 600px;" />
</a>
<p>File <code class="docutils literal notranslate"><span class="pre">outputs/model_validation/indices_all.csv</span></code> includes a table with the performance indices for all validation cell sizes, all models, and all periods. In this example, both the Random Forest model and the iCAR model are better than the benchmark model whatever the performance indices considered. The iCAR model is the best model has it has the lowest MedAE, the lowest RMSE, and the highest <span class="math notranslate nohighlight">\(R^{2}\)</span> for the validation period which is the only period with independent data (i.e. which have not be used to calibrate the models). This is true whatever the validation cell size chosen.</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-indices">
<caption><span class="caption-text">Performance indices.</span><a class="headerlink" href="#tab-indices" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>csize_coarse_grid</p></th>
<th class="head"><p>csize_coarse_grid_ha</p></th>
<th class="head"><p>ncell</p></th>
<th class="head"><p>period</p></th>
<th class="head"><p>model</p></th>
<th class="head"><p>MedAE</p></th>
<th class="head"><p>R2</p></th>
<th class="head"><p>RMSE</p></th>
<th class="head"><p>wRMSE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>bm</p></td>
<td><p>2.71</p></td>
<td><p>0.43</p></td>
<td><p>6.08</p></td>
<td><p>6.22</p></td>
</tr>
<tr class="row-odd"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>icar</p></td>
<td><p>1.78</p></td>
<td><p>0.65</p></td>
<td><p>4.79</p></td>
<td><p>4.59</p></td>
</tr>
<tr class="row-even"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>glm</p></td>
<td><p>2.39</p></td>
<td><p>0.38</p></td>
<td><p>6.39</p></td>
<td><p>6.52</p></td>
</tr>
<tr class="row-odd"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>rf</p></td>
<td><p>2.09</p></td>
<td><p>0.50</p></td>
<td><p>5.69</p></td>
<td><p>5.74</p></td>
</tr>
<tr class="row-even"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>mw_11</p></td>
<td><p>2.34</p></td>
<td><p>0.56</p></td>
<td><p>7.66</p></td>
<td><p>6.83</p></td>
</tr>
<tr class="row-odd"><td><p>50</p></td>
<td><p>225.0</p></td>
<td><p>604</p></td>
<td><p>validation</p></td>
<td><p>mw_21</p></td>
<td><p>2.51</p></td>
<td><p>0.56</p></td>
<td><p>7.54</p></td>
<td><p>6.66</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="allocating-deforestation">
<h2>Allocating deforestation<a class="headerlink" href="#allocating-deforestation" title="Link to this heading">#</a></h2>
<img alt="_images/interface-allocation.png" src="_images/interface-allocation.png" />
<p><br/></p>
<p>The deforestation risk map obtained with the iCAR model at t3 can be used to allocate deforestation after year 2020. Both the risk map with classes of deforestation from 1 to 65535 and the <code class="docutils literal notranslate"><span class="pre">defrate_cat_icar_forecast.csv</span></code> table with deforestation rates for all classes of deforestation risk are necessary to allocate deforestation in the future.</p>
<p>The table only includes values for <code class="docutils literal notranslate"><span class="pre">rate_mod</span></code>, the relative spatial deforestation rates from the iCAR model estimated on the historical period. As for the validation step, the deforestation must be adjusted for quantity depending on the amount of deforestation expected in the future.</p>
<div class="pst-scrollable-table-container"><table class="table" id="tab-defrate-icar-forecast">
<caption><span class="caption-text">Deforestation rates for the iCAR model classes for forecasting deforestation.</span><a class="headerlink" href="#tab-defrate-icar-forecast" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>cat</p></th>
<th class="head"><p>nfor</p></th>
<th class="head"><p>ndefor</p></th>
<th class="head"><p>rate_obs</p></th>
<th class="head"><p>rate_mod</p></th>
<th class="head"><p>rate_abs</p></th>
<th class="head"><p>time_interval</p></th>
<th class="head"><p>pixel_area</p></th>
<th class="head"><p>defor_dens</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>137575</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>1e-06</p></td>
<td><p>0.0</p></td>
<td><p>20</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>5425</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>1.6259239478743857e-05</p></td>
<td><p>0.0</p></td>
<td><p>20</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>3523</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>3.151847895748772e-05</p></td>
<td><p>0.0</p></td>
<td><p>20</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>2458</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>4.677771843623157e-05</p></td>
<td><p>0.0</p></td>
<td><p>20</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>2078</p></td>
<td><p>0</p></td>
<td><p>0.0</p></td>
<td><p>6.203695791497542e-05</p></td>
<td><p>0.0</p></td>
<td><p>20</p></td>
<td><p>0.09</p></td>
<td><p>0.0</p></td>
</tr>
</tbody>
</table>
</div>
<p>Considering a total deforestation <span class="math notranslate nohighlight">\(D\)</span> (in ha) for the next <span class="math notranslate nohighlight">\(Y\)</span> years at the jurisdictional level, the adjustment factor is <span class="math notranslate nohighlight">\(\rho = D / (A \sum_i n_{i} \theta_{m,i})\)</span>, with <span class="math notranslate nohighlight">\(A\)</span> the pixel area in ha, the absolute rate is <span class="math notranslate nohighlight">\(\theta_{a,i} = \rho \theta_{m,i}\)</span>, and the deforestation density is <span class="math notranslate nohighlight">\(\delta_{i} = \theta_{a,i} \times A / Y\)</span>. The deforestation density <span class="math notranslate nohighlight">\(\delta_{i}\)</span> is used to predict the amount of deforestation (in ha/yr) for each forest pixel belonging to a given class of deforestation risk for the next <span class="math notranslate nohighlight">\(Y\)</span> years (for notations, see details <a class="reference external" href="plugin_api.html#defrate-table">here</a>).</p>
<p>The risk map together with the table of computed deforestation density can be used to <a class="reference external" href="https://verra.org/verra-launches-unplanned-deforestation-allocation-tool-vt0007-issues-call-for-supplementary-materials/">proportionally allocate fractions</a> of either the jurisdictional unplanned deforestation activity data baseline (in the context of <a class="reference external" href="https://verra.org/methodologies/vmd0055-estimation-of-emission-reductions-from-avoiding-unplanned-deforestation-v1-0/">VMD0055</a>) or the jurisdictional FREL (in the context of the VCS <a class="reference external" href="https://verra.org/programs/jurisdictional-nested-redd-framework/">Jurisdictional and Nested REDD+</a> Framework) to projects or programs to be implemented within the jurisdiction. To do so, a table with the number of pixels for each class of deforestation risk in the project area must be computed.</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="_images/allocation.png"><img alt="_images/allocation.png" src="_images/allocation.png" style="width: 600px;" />
</a>
<figcaption>
<p><span class="caption-text">Allocating deforestation to projects within the jurisdiction.</span><a class="headerlink" href="#id10" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The <code class="docutils literal notranslate"><span class="pre">deforisk</span></code> QGIS plugin includes an utility to facilitate the allocation of the deforestation to projects. Before using it, you can download the vector file defining the borders of a fake project in Martinique (<a class="reference external" href="_static/get_started/project_borders_MTQ_jurisdiction.gpkg">project_borders_MTQ_jurisdiction.gpkg</a>).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Juris.</span> <span class="pre">risk</span> <span class="pre">map</span></code>: File <code class="docutils literal notranslate"><span class="pre">prob_icar_t3.tif</span></code> for the best risk map.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Table.</span> <span class="pre">with</span> <span class="pre">defor.</span> <span class="pre">rates</span></code>: File <code class="docutils literal notranslate"><span class="pre">defrate_cat_icar_forecast.csv</span></code> for the table with the deforestation rates from the icar model at t3 for each class of deforestation risk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">borders</span></code>: File <code class="docutils literal notranslate"><span class="pre">project_borders_MTQ_jurisdiction.gpkg</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Juris.</span> <span class="pre">deforestation</span> <span class="pre">(ha)</span></code>: 4000. About 400 ha have been deforested each year in 2010–2020 in Martinique.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Length</span> <span class="pre">forecast</span> <span class="pre">period</span> <span class="pre">(yr)</span></code>: 10.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">deforestation</span> <span class="pre">density</span> <span class="pre">map</span> <span class="pre">(ha/pixel/yr)</span></code>: checked.</p></li>
</ul>
<p>Pushing the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button in this box computes the quantity adjustment factor and the deforestation density for each class of risk using the total expected deforestation at the jurisdictional level (<span class="math notranslate nohighlight">\(D=4000\)</span>)and the relative spatial deforestation rates from the model. Then, the risk map with classes of deforestation risk is cropped to project borders and the number of forest pixels in each class of risk is computed at the project level. The expected deforestation at the project level is obtained summing the deforestation densities within the project. A raster file with the deforestation density for each forest pixel is also produced.</p>
<p>A folder <code class="docutils literal notranslate"><span class="pre">outputs/allocating_deforestation</span></code> is created with the file <code class="docutils literal notranslate"><span class="pre">defor_project.csv</span></code> indicating the predicted deforestation (106.7 ha) for the period 2020–2030 for the project:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id11">
<caption><span class="caption-text">Allocated deforestation for the project.</span><a class="headerlink" href="#id11" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>period</p></th>
<th class="head"><p>length (yr)</p></th>
<th class="head"><p>deforestation (ha)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>annual</p></td>
<td><p>1.0</p></td>
<td><p>10.7</p></td>
</tr>
<tr class="row-odd"><td><p>entire</p></td>
<td><p>10.0</p></td>
<td><p>106.9</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="installation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installation</p>
      </div>
    </a>
    <a class="right-next"
       href="articles.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Articles</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-variables">Get variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#benchmark-model">Benchmark model</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fit-model-to-data">Fit model to data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#predict-the-deforestation-risk">Predict the deforestation risk</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#forestatrisk-models">Forestatrisk models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sample-observations">Sample observations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Fit model to data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Predict the deforestation risk</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-window-models">Moving window models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Fit model to data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Predict the deforestation risk</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#validation">Validation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#allocating-deforestation">Allocating deforestation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Cirad and FAO.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>